<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>배구 시뮬레이션</title>
  <style>
    body { margin: 0; background: #e9f5ff; display: flex; justify-content: center; align-items: center; height: 100vh; }
    canvas { background: #d1f0d1; border: 3px solid #444; }
  </style>
</head>
<body>
<canvas id="court" width="900" height="500"></canvas>
<script>
const canvas = document.getElementById("court");
const ctx = canvas.getContext("2d");

const court = { width: 900, height: 500 };
const net = { x: court.width/2, height: court.height, width: 4 };

const ball = { x: 450, y: 250, r: 10, vx: 4, vy: -3, gravity: 0.2 };

// 플레이어 6명씩 좌우 배치
const players = [];
for (let i = 0; i < 6; i++) {
  players.push({x: 150 + (i%3)*80, y: 120 + Math.floor(i/3)*200, r: 15, team: "L"});
}
for (let i = 0; i < 6; i++) {
  players.push({x: 750 - (i%3)*80, y: 120 + Math.floor(i/3)*200, r: 15, team: "R"});
}

function drawCourt() {
  ctx.fillStyle = "#d1f0d1";
  ctx.fillRect(0, 0, court.width, court.height);

  ctx.fillStyle = "#aaa";
  ctx.fillRect(net.x - net.width/2, 0, net.width, net.height);
}

function drawPlayers() {
  players.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fillStyle = p.team === "L" ? "#4cafef" : "#ef5350";
    ctx.fill();
  });
}

function drawBall() {
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2);
  ctx.fillStyle = "orange";
  ctx.fill();
}

function updateBall() {
  ball.vy += ball.gravity;
  ball.x += ball.vx;
  ball.y += ball.vy;

  if (ball.x - ball.r < 0 || ball.x + ball.r > court.width) ball.vx *= -1;
  if (ball.y + ball.r > court.height) { 
    ball.y = court.height - ball.r;
    ball.vy *= -0.8; // 바닥에서 튀기기
  }
}

function loop() {
  drawCourt();
  drawPlayers();
  drawBall();
  updateBall();
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
